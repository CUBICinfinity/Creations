---
title: "Weather and Potatoes"
author: "Jim Greene"
date: July 17, 2018
output: 
  html_document:
    keep_md: true
    theme: journal
---



I joined the Math 488 team invested on building a model to help farmers predict their crop yeids based on the weather.
After starting their project Wunderground changed their policies and would no longer issue free API keys. They could only use the two keys they had once a day.
They showed me the code they were using to pull the data and I saved it, but then decided I didn't want to hold the data on my computer. After waiting to receive the data they would often find that is was incomplete or did not go back far enough. I had started searching for other sources of weather data and found that [NOAA](https://www.ncdc.noaa.gov/cdo-web/datasets) provided a lot of data for free. It was quick to download, and more complete than the stations attempted on Wunderground. In the end, all the weather data they used came from NOAA. Andrew and the others analyzed the patterns and greated dozens of graphics. Their final presentation is included in this folder.


Having heard that hot days and cold nights are good for growing potatoes, the team was curious if they would be able to observe that relationship. They also assumed that there could be other trends that I could buil a graphic to look for. So I engineered and created the plot below.
![](files/Line_Multi.png)
This plot is more difficult to read at first, but it shows a lot and raises more questions. It helped me learn how to condense many variables on the same plot. I want to redo this using TrelliscopeJs.

This is a picture of me discussing the design with the group.
![](files/sharp.jpg)


Because the tempurature range was one of the things we were interested in I've created a plot to show that.
![](files/avgDIFF.png)
Bingham and Jefferson are the only counties that appear to have a trend, but it is probably due to the later years which provided higher yields. If I find a way to isolate the effect of tempurature range from that of other variables I might be able to see something.

This plot is the same, but with precipitation.
![](files/avgPRCP.png)
Again, the year is the most obvious factor.



<!--html_preserve--><div id="3d1c712f5dc0" style="width:960px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="3d1c712f5dc0">{"x":{"visdat":{"3d1c9187acf":["function () ","plotlyVisDat"]},"cur_data":"3d1c9187acf","attrs":{"3d1c9187acf":{"x":{},"y":{},"z":{},"alpha":1,"sizes":[10,100],"type":"scatter3d","mode":"markers","color":{},"symbol":{}}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"scene":{"xaxis":{"title":"avgPRCP"},"yaxis":{"title":"avgDIFF"},"zaxis":{"title":"Value"}},"xaxis":{"domain":[0,1]},"yaxis":{"domain":[0,1]},"hovermode":"closest","showlegend":true,"legend":{"y":0.5,"yanchor":"top"}},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[0.0119955654101996,0.0110084033613445,0.0169392033542977,0.0154297693920335,0.0275519630484988,0.0390330788804071,0.0186683417085427,0.0268817204301075,0.0146394230769231,0.0502469135802469,0.024431554524362,0.026049896049896,0.0152598752598753,0.0174789915966387,0.0362473794549266,0.0399159663865546,0.0292050209205021],"y":[35.9645390070922,35.7964601769912,33.848623853211,34.9166666666667,32.6788793103448,32.5448717948718,34.1734475374732,32.8926174496644,33.6825396825397,32.5505617977528,32.0625,31.1781970649895,33.5497925311203,31.4368530020704,30.6099585062241,30.7826086956522,31.7494824016563],"z":[375,332,335,325,370,346,362,346,367,385,367,384,406,395,400,391,409],"type":"scatter3d","mode":"markers","name":"BINGHAM","marker":{"symbol":"circle","colorbar":{"title":"Year","ticklen":2},"cmin":2000,"cmax":2016,"colorscale":[["0","rgba(68,1,84,1)"],["0.0625","rgba(71,26,104,1)"],["0.0703125","rgba(71,28,107,1)"],["0.125","rgba(71,45,122,1)"],["0.1796875","rgba(67,62,130,1)"],["0.1875","rgba(66,64,132,1)"],["0.25","rgba(60,82,138,1)"],["0.3125","rgba(53,98,141,1)"],["0.359375","rgba(48,110,142,1)"],["0.375","rgba(46,114,142,1)"],["0.4375","rgba(39,128,142,1)"],["0.5","rgba(37,144,140,1)"],["0.5390625","rgba(33,154,138,1)"],["0.5625","rgba(33,160,136,1)"],["0.625","rgba(47,174,127,1)"],["0.6875","rgba(67,187,116,1)"],["0.71875","rgba(84,193,107,1)"],["0.75","rgba(98,199,98,1)"],["0.828125","rgba(144,213,72,1)"],["0.9140625","rgba(197,224,43,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],"line":{"color":"transparent"}},"frame":null},{"x":[0.0196913580246914,0.0114814814814815,0.0168518518518519,0.0220987654320988,0.029559748427673,0.0318243243243243,0.0219736842105263,0.00641509433962264,0.0106521739130435,0.0272781065088757,0.0279279279279279,0.02575],"y":[37.2608695652174,38.6242038216561,35.9115646258503,37.261744966443,35.0328947368421,35.5555555555556,36.6481481481481,37.453781512605,36.1551724137931,31.1021897810219,31.7657657657658,31.8641975308642],"z":[345,339,355,333,380,385,389,426,391,472,412,471],"type":"scatter3d","mode":"markers","name":"JEFFERSON","marker":{"symbol":"triangle-up","colorbar":{"title":"Year","ticklen":2},"cmin":2000,"cmax":2016,"colorscale":[["0","rgba(68,1,84,1)"],["0.0625","rgba(71,26,104,1)"],["0.0703125","rgba(71,28,107,1)"],["0.125","rgba(71,45,122,1)"],["0.1796875","rgba(67,62,130,1)"],["0.1875","rgba(66,64,132,1)"],["0.25","rgba(60,82,138,1)"],["0.3125","rgba(53,98,141,1)"],["0.359375","rgba(48,110,142,1)"],["0.375","rgba(46,114,142,1)"],["0.4375","rgba(39,128,142,1)"],["0.5","rgba(37,144,140,1)"],["0.5390625","rgba(33,154,138,1)"],["0.5625","rgba(33,160,136,1)"],["0.625","rgba(47,174,127,1)"],["0.6875","rgba(67,187,116,1)"],["0.71875","rgba(84,193,107,1)"],["0.75","rgba(98,199,98,1)"],["0.828125","rgba(144,213,72,1)"],["0.9140625","rgba(197,224,43,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011],"line":{"color":"transparent"}},"frame":null},{"x":[0.01121875,0.00911262798634812,0.0167251461988304,0.0191752577319588,0.0413836477987421,0.037063829787234,0.0351131221719457,0.021265306122449,0.0220689655172414,0.0435233160621762,0.0310404624277457,0.031137339055794,0.0157805907172996,0.0211924686192469,0.0596848739495798,0.0388842975206612],"y":[32.30625,32.8668941979522,30.6491228070175,32.439446366782,30.5268138801262,30.4595744680851,32.0765765765766,32.1244979919679,31.9734513274336,30.1914893617021,30.9505813953488,30.0852878464819,33.5979381443299,31.8863636363636,30.7921810699588,31.7649484536082],"z":[315,311,330,310,320,319,337,321,319,381,323,367,385,369,384,379],"type":"scatter3d","mode":"markers","name":"MADISON","marker":{"symbol":"square","colorbar":{"title":"Year","ticklen":2},"cmin":2000,"cmax":2016,"colorscale":[["0","rgba(68,1,84,1)"],["0.0625","rgba(71,26,104,1)"],["0.0703125","rgba(71,28,107,1)"],["0.125","rgba(71,45,122,1)"],["0.1796875","rgba(67,62,130,1)"],["0.1875","rgba(66,64,132,1)"],["0.25","rgba(60,82,138,1)"],["0.3125","rgba(53,98,141,1)"],["0.359375","rgba(48,110,142,1)"],["0.375","rgba(46,114,142,1)"],["0.4375","rgba(39,128,142,1)"],["0.5","rgba(37,144,140,1)"],["0.5390625","rgba(33,154,138,1)"],["0.5625","rgba(33,160,136,1)"],["0.625","rgba(47,174,127,1)"],["0.6875","rgba(67,187,116,1)"],["0.71875","rgba(84,193,107,1)"],["0.75","rgba(98,199,98,1)"],["0.828125","rgba(144,213,72,1)"],["0.9140625","rgba(197,224,43,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"line":{"color":"transparent"}},"frame":null},{"x":[0.039746835443038,0.0293347193347193,0.0526096033402923,0.0327157894736842,0.0587358916478555,0.0770851063829787,0.0351898734177215,0.0404592901878914,0.042280701754386,0.0792219679633867,0.0610927835051546,0.0585924369747899,0.039789029535865],"y":[30.8400900900901,31.5977777777778,29.7847826086957,30.0814977973568,27.9318181818182,27.9092920353982,29.6638477801269,30.2327586206897,29.1243386243386,28.2088452088452,27.6970387243736,27.7928870292887,30.2746331236897],"z":[215,225,250,233,247,235,257,249,246,276,215,233,285],"type":"scatter3d","mode":"markers","name":"TETON","marker":{"symbol":"cross-thin-open","colorbar":{"title":"Year","ticklen":2},"cmin":2000,"cmax":2016,"colorscale":[["0","rgba(68,1,84,1)"],["0.0625","rgba(71,26,104,1)"],["0.0703125","rgba(71,28,107,1)"],["0.125","rgba(71,45,122,1)"],["0.1796875","rgba(67,62,130,1)"],["0.1875","rgba(66,64,132,1)"],["0.25","rgba(60,82,138,1)"],["0.3125","rgba(53,98,141,1)"],["0.359375","rgba(48,110,142,1)"],["0.375","rgba(46,114,142,1)"],["0.4375","rgba(39,128,142,1)"],["0.5","rgba(37,144,140,1)"],["0.5390625","rgba(33,154,138,1)"],["0.5625","rgba(33,160,136,1)"],["0.625","rgba(47,174,127,1)"],["0.6875","rgba(67,187,116,1)"],["0.71875","rgba(84,193,107,1)"],["0.75","rgba(98,199,98,1)"],["0.828125","rgba(144,213,72,1)"],["0.9140625","rgba(197,224,43,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012],"line":{"color":"transparent"}},"frame":null},{"x":[0.00641509433962264,0.0792219679633867],"y":[27.6970387243736,38.6242038216561],"type":"scatter3d","mode":"markers","opacity":0,"hoverinfo":"none","showlegend":false,"marker":{"colorbar":{"title":"Year","ticklen":2,"len":0.5,"y":1,"lenmode":"fraction","yanchor":"top"},"cmin":2000,"cmax":2016,"colorscale":[["0","rgba(68,1,84,1)"],["0.0625","rgba(71,26,104,1)"],["0.0703125","rgba(71,28,107,1)"],["0.125","rgba(71,45,122,1)"],["0.1796875","rgba(67,62,130,1)"],["0.1875","rgba(66,64,132,1)"],["0.25","rgba(60,82,138,1)"],["0.3125","rgba(53,98,141,1)"],["0.359375","rgba(48,110,142,1)"],["0.375","rgba(46,114,142,1)"],["0.4375","rgba(39,128,142,1)"],["0.5","rgba(37,144,140,1)"],["0.5390625","rgba(33,154,138,1)"],["0.5625","rgba(33,160,136,1)"],["0.625","rgba(47,174,127,1)"],["0.6875","rgba(67,187,116,1)"],["0.71875","rgba(84,193,107,1)"],["0.75","rgba(98,199,98,1)"],["0.828125","rgba(144,213,72,1)"],["0.9140625","rgba(197,224,43,1)"],["1","rgba(253,231,37,1)"]],"showscale":true,"color":[2000,2016]},"z":[215,472],"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script><!--/html_preserve-->
